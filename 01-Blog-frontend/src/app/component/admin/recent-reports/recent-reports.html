<div class="recent-reports-card">
    <h2 class="card-title">{{title}}</h2>

    <div class="table-container">
        <table class="reports-table">
            <thead>
                <tr>
                    <th>Reported Item</th>
                    <th>Reported By</th>
                    <th>Reason</th>
                    <th>State</th>
                    <th>Date</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                @for (report of recentreports; track $index) {
                <tr>
                    <td>
                        <div class="reported-item">
                            <h4 [routerLink]="['/'+report.post.postId]" class="item-link">
                                Post #{{ report.post.postId.substring(0, 6) }}
                            </h4>
                        </div>
                    </td>
                    <td>
                        <span class="user">{{ '@' + report.user.username }}</span>
                    </td>
                    <td>
                        <span class="reason-badge">{{ getReasonText(report.reason) }}</span>
                    </td>
                    <td>
                        <span class="state-badge" [ngClass]="getStateClass(report.state)">
                            {{ getStateText(report.state) }}
                        </span>
                    </td>
                    <td class="date">{{ formatDate(report.createdAt) }}</td>
                    <td>
                        <div class="actions">
                            <button class="action-btn take-action-btn" (click)="onTakeAction(report)"
                                aria-label="Take action on report">
                                <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24"
                                    fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                    stroke-linejoin="round">
                                    <path d="M12 9v4" />
                                    <path d="M12 17h.01" />
                                    <path
                                        d="M12 2a10 10 0 0 0-8 4 10 10 0 0 0 0 12 10 10 0 0 0 16 0 10 10 0 0 0-8-12z" />
                                </svg>
                            </button>

                            <button class="action-btn dismiss-btn" (click)="onDismiss(report,$index)"
                                aria-label="Dismiss report">
                                <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24"
                                    fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                    stroke-linejoin="round">
                                    <circle cx="12" cy="12" r="10" />
                                    <line x1="4.93" y1="4.93" x2="19.07" y2="19.07" />
                                </svg>
                            </button>
                        </div>
                        @if (showConfirmModal) {
                            <app-confirmation-modal
                                [message]="confirmMessage"
                                [confirmText]="confirmButtonText"
                                (confirm)="onConfirmAction()"
                                (cancel)="showConfirmModal = false"
                            ></app-confirmation-modal>
                        }
                    </td>
                </tr>
                }
            </tbody>
        </table>
    </div>
</div>