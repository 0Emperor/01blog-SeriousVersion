@use "sass:color";
// Make sure this path is correct for your project structure
@import '../../../../variables'; 

.create-post-container {
  // This is the main page background
  background-color: $background-dark;
  min-height: 100vh;
  display: flex;
  flex-direction: column;
  align-items: center;
  // Padding for the whole page
  padding: $space-lg $space-md;
}

// This is the "card" wrapper
.post-panel {
  width: 100%;
  max-width: 600px;
  // Use the panel background for contrast
  background-color: $panel-bg-dark;
  // Use your border radius
  border-radius: $border-radius-lg;
  // Add padding inside the card
  padding: $space-lg;
  // Add a subtle shadow
  box-shadow: $shadow;
}

.post-header {
  width: 100%;
  // Reduced padding since the panel has its own
  padding: 0 0 $space-md;
  text-align: center;
  
  h2 {
    font-size: 2rem;
    font-weight: $heading-font-weight;
    color: $text-dark;
    margin: 0;
  }
}

.post-form-content {
  width: 100%;
}

.input-group {
  margin-bottom: $space-lg;
  
  label {
    display: block;
    font-size: 1rem;
    font-weight: $heading-font-weight;
    color: $text-dark;
    margin-bottom: $space-sm;
  }
}

.custom-input-wrapper {
  background-color: $input-bg; 
  border-radius: $border-radius-sm;
  height: 48px;
  
  .custom-input {
    width: 100%;
    height: 100%;
    border: none;
    outline: none;
    background: transparent;
    color: $text-dark;
    padding: 0 $space-md;
    font-size: 1rem;
    
    &::placeholder {
      color: $muted-dark;
      opacity: 0.8;
    }
  }
}

// --- Quill Editor Overrides ---
.editor-wrapper {
  
  // Force Quill editor to take full width
  quill-editor {
    display: block;
    width: 100%;
  }
}

::ng-deep {
  .ql-container.ql-snow,
  .ql-toolbar.ql-snow {
    background-color: $input-bg;
    border: none;
  }
  
  .ql-toolbar.ql-snow {
    border-radius: $border-radius-sm $border-radius-sm 0 0;
    padding: $space-sm;
    
    .ql-formats {
      margin-right: $space-sm;
    }

    button {
      width: 32px;
      height: 32px;
      padding: 0;
      background-color: transparent; 
      border-radius: $border-radius-sm;
      border: 1px solid transparent;
      transition: all 0.2s ease;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      
      &:hover {
        background-color: color.adjust($input-bg, $lightness: 15%);
        border-color: color.adjust($input-bg, $lightness: 20%);
        stroke: $text-dark;
        transform: translateY(-1px);
      }
      
      .ql-stroke, .ql-fill {
        stroke: $text-dark;
        transition: all 0.2s ease;
      }
      &:hover {
        .ql-stroke, .ql-fill {
          stroke: $text-dark;
          transition: all 0.2s ease;
        }
      }
      &.ql-active {
        background-color: $primary;
        border-color: $primary;
        
        .ql-stroke, .ql-fill {
          stroke: $button-text-dark; 
        }
        
        &:hover {
          background-color: $primary-dark;
          border-color: $primary-dark;
        }
      }
    }

    .ql-picker-label {
        color: $text-dark;
        &:hover {
          color: $text-dark;
        }
    }
  }
  
  .ql-container.ql-snow {
    border-radius: 0 0 $border-radius-sm $border-radius-sm;
    min-height: 150px;
    
    .ql-editor {
      min-height: 150px;
      color: $text-dark;
      font-size: 1rem;
      padding: $space-md;
      
      &.ql-blank::before {
        color: $muted-dark;
        opacity: 0.8;
        left: $space-md;
      }
    }
  }
}

// --- Action Buttons (Bottom) ---
.post-actions {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding-top: $space-lg; // Only need padding on top
  
  ::ng-deep .mat-mdc-button-base {
    height: 45px;
    padding: 0 $space-lg;
    font-size: 1rem;
    font-weight: 500;
    border-radius: $border-radius-sm;
    transition: all 0.2s ease;
  }

  .cancel-button {
    background-color: $input-bg !important;
    color: $button-text-dark !important; 
    
    &:hover:not([disabled]) {
      background-color: color.adjust($input-bg, $lightness: 5%) !important;
    }
  }
  
  .submit-button {
    background-color: $primary !important;
    color: $button-text-dark !important;
    
    &:hover:not([disabled]) {
      background-color: $primary-dark !important;
    }

    &[disabled] {
        background-color: $muted-dark !important;
        color: $background-dark !important;
    }
  }
}

// Mobile Responsiveness
@media (max-width: $mobile-breakpoint) {
  .create-post-container {
    padding: $space-sm; // Less padding on mobile screen
  }

  .post-panel {
    padding: $space-md; // Less padding inside panel on mobile
  }

  .post-header {
    h2 {
      font-size: 1.5rem;
    }
  }
  
  .post-actions {
    flex-direction: column-reverse; 
    gap: $space-md;
    
    .cancel-button,
    .submit-button {
      width: 100%;
    }
  }
}