
<div class="container">
    @if (post!=null){
    <div class="Header">
        <div class="meta">
            <app-user-header [userr]="post.user"></app-user-header>
            <div class="time">{{post.createdAt|timeAgo}}</div>
        </div>
        <div class="actions">
            @if(post.isOwn){
            <button class="edit" routerLink="/edit/{{post.postId}}">Edit</button>
            <button class="delete" (click)="delete()">Delete</button>
            }@else if(current.getUser?.role =="ADMIN"){
            @if(post.hidden){
            <button class="hide" (click)="unHide()">UnHide</button>
            }@else {
            <button class="hide" (click)="hide()">Hide</button>
            }
            <button class="delete" (click)="delete()">Delete</button>
            }@else if(post.user.role!="ADMIN"){
                <button class="report" (click)="openReportModal = true">Report</button>            }
        </div>
        @if (showConfirmModal) {
            <app-confirmation-modal
                [message]="confirmMessage"
                [confirmText]="confirmButtonText"
                (confirm)="onConfirmAction()"
                (cancel)="showConfirmModal = false"
            ></app-confirmation-modal>
        }
        @if (openReportModal && post) {
            <div class="modal-backdrop" (click)="openReportModal = false"> 
              <app-report-post 
                [postId]="post.postId" 
                (close)="openReportModal = false"
                (click)="$event.stopPropagation()" ></app-report-post>
            </div>
          }

    </div>
    <div class="preview">
        <h1>{{post.title}}</h1>
        <div class="content">
            <markdown [data]="post.description" class="text"></markdown>
        </div>
        <app-comment-area [pid]="post.postId"></app-comment-area>
    </div>
    }
</div>